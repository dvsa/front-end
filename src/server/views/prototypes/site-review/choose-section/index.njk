{% extends 'layouts/mts.layout.njk' %}

{% set pageTitle = 'Site review - VTS079774' %}

{% block content %}

<div class="breadcrumbs">
  <ol>
    <li>
      <a href="/manuals">Home</a>
    </li>
    <li>
      <a href="/">WILLETTA AREDONDO</a>
    </li>
    <li>
      <a href="/prototypes/site-review/">VTS079774</a>
    </li>
    <li>Site review</li>
  </ol>
</div>

<h1 class="heading-xlarge heading heading--page-heading">
  <span class="heading-secondary">Site review</span>
  Record a site review
</h1>

<div class="u-margin-bottom-30">
  
  <div class="action-panel">
    <div class="action-panel__container">
      <h2 class="action-panel__heading">Compliance</h2>
    </div>
    <div class="action-panel__container">
      {% if not viewData.compliance.commitedLevel %}
        <span class="action-panel__value">Not recorded</span>
      {% endif %}
    </div>
    <div class="action-panel__container--last">
      <a href="/prototypes/site-review/assessment/compliance" class="button">
        {{ "Edit" if viewData.compliance.commitedLevel else 'Record'}} outcome
      </a>
    </div>
  </div>

  {% if viewData.compliance.commitedLevel %}
  <div class="action-panel__summary"> 
      <h2 class="action-panel__summary-heading">{{viewData.compliance.commitedLevel}}</h2>
      {% if viewData.compliance.commitedComment %}
      
      <ol class="action-panel__summary-list">
        <li class="action-panel__summary-list-item">
        <span class="action-panel__summary-list-item-content">
            {{"Comment" if viewData.compliance.satisfactory.isChecked else "Actions required"}}:
            {{viewData.compliance.commitedComment}} 
        </span>
        </li>
      </ol>
      {% endif %}
    </div>
  {% endif %}
    
  <div class="action-panel">
    <div class="action-panel__container">
      <h2 class="action-panel__heading">Premises</h2>
    </div>
    <div class="action-panel__container">
      {% if not viewData.premises.commitedLevel %}
      <span class="action-panel__value">Not recorded</span>
      {% endif %}
    </div>
    <div class="action-panel__container--last">
      <a href="/prototypes/site-review/assessment/premises" class="button">
        {{ "Edit" if viewData.premises.commitedLevel else 'Record'}} outcome
      </a>
    </div>
  </div>

  {% if viewData.premises.commitedLevel %}
  <div class="action-panel__summary"> 
      <h2 class="action-panel__summary-heading">{{viewData.premises.commitedLevel}}</h2>
      {% if viewData.premises.commitedComment %}
      <ol class="action-panel__summary-list">
        <li class="action-panel__summary-list-item">
        <span class="action-panel__summary-list-item-content">
            {{"Comment" if viewData.premises.satisfactory.isChecked else "Actions required"}}: 
            {{viewData.premises.commitedComment}}
          </span>
        </li>
      </ol>
      {% endif %}
  </div>
  {% endif %}
    
  <div class="action-panel">
    <div class="action-panel__container">
      <h2 class="action-panel__heading">Management and quality</h2>
    </div>
    <div class="action-panel__container">
    {% if not viewData['management-and-quality'].commitedLevel %}
      <span class="action-panel__value">Not recorded</span>
    {% endif %}
    </div>
    <div class="action-panel__container--last">
      <a href="/prototypes/site-review/assessment/management-and-quality" class="button">
        {{ "Edit" if viewData['management-and-quality'].commitedLevel else 'Record'}} outcome
      </a>
    </div>
  </div>
  {% if viewData['management-and-quality'].commitedLevel %}
  <div class="action-panel__summary">
    <h2 class="action-panel__summary-heading">
      {{viewData['management-and-quality'].commitedLevel}}
    </h2>
    {% if viewData['management-and-quality'].commitedComment %} 
   <ol class="action-panel__summary-list">
        <li class="action-panel__summary-list-item">
        <span class="action-panel__summary-list-item-content">
          {{"Comment" if viewData['management-and-quality'].satisfactory.isChecked else "Actions required"}}: 
          {{viewData['management-and-quality'].commitedComment}}
        </span>
      </li>
    </ol>
    {% endif %} 
  </div>
  {% endif %}


  <div class="action-panel">
    <div class="action-panel__container">
      <h2 class="action-panel__heading">People</h2>
    </div>
    <div class="action-panel__container">
      {% if not viewData.people.commitedLevel %}
        <span class="action-panel__value">Not recorded</span>
      {% endif %}
    </div>
    <div class="action-panel__container--last">
      <a href="/prototypes/site-review/assessment/people" class="button">
      {{ "Edit" if viewData.people.commitedLevel else 'Record'}} outcome
      </a>
    </div>
  </div>
  {% if viewData.people.commitedLevel %}
  <div class="action-panel__summary">
    <h3 class="action-panel__summary-heading">{{viewData.people.commitedLevel}}</h3>
    {% if viewData.people.commitedComment %} 
    <ol class="action-panel__summary-list">
        <li class="action-panel__summary-list-item">
        <span class="action-panel__summary-list-item-content">
        {{"Comment" if viewData.people.satisfactory.isChecked else "Actions required"}}: 
        {{viewData.people.commitedComment}}</span>
      </li>
    </ol>
    {% endif %}  
  </div>
  {% endif %}

  <div class="action-panel">
    <div class="action-panel__container">
      <h2 class="action-panel__heading">Activity</h2>
    </div>
    <div class="action-panel__container">
      {% if not viewData.activity.isCompleted %}
        <span class="action-panel__value">Not recorded</span>
      {% endif %}
    </div>
    <div class="action-panel__container--last">
      <a href="/prototypes/site-review/assessment/activity" class="button">
        {{ "Edit" if viewData.activity.isCompleted else 'Record'}} activity
      </a>
    </div>
  </div>

  {% if viewData.activity.isCompleted %}
  <div class="action-panel__summary">
    <h2 class="action-panel__summary-heading">
      {% if viewData.activity.commitedActivityPerformed %}
        <span class="action-panel__summary-heading-type" style="padding-left: 0px;">Activity performed</span>
      {% else %}
        <span class="action-panel__summary-heading-type" style="padding-left: 0px;">Activity not performed</span>
      {% endif %}
    </h2>
    <ol class="action-panel__summary-list">
        <li class="action-panel__summary-list-item">
        {% if viewData.activity.commitedActivityPerformed %} 
        <span class="action-panel__summary-list-item-content">MOT Test number: {{viewData.activity.commitedTestNum}}</span>
        {% else %} 
        <span class="action-panel__summary-list-item-content">Reason given: {{viewData.activity.commitedReason}}</span>
          <p class='u-margin-bottom-5'>Comment: {{viewData.activity.commitedOtherReason}}</p>
        {% endif %}
      </li>
    </ol>
  </div>
  {% endif %}

</div>

<div class="form-group u-margin-bottom-20">
  {% if (viewData.activity.isCompleted) and (viewData.compliance.commitedLevel) and (viewData['management-and-quality'].commitedLevel) and (viewData.people.commitedLevel) and (viewData.premises.commitedLevel) %}
    <a class="button" href="/prototypes/site-review/enter-details" type="submit" value="Continue">Continue</a>
    {% else %}
    <a class="button" type="submit" value="Continue" disabled="true">Continue</a>
  {% endif %}
</div>

<div class="form-group u-margin-bottom-20">
  <a href="/prototypes/site-review/">Return to VTS overview</a>
</div>

{% endblock %}
